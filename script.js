const A=[{identifier:"Sky Horizon",colors:["#89CFF0","#CCCCFF"]},{identifier:"Forest Dawn",colors:["#90EE90","#FFD700"]},{identifier:"Deep Ocean",colors:["#0077B6","#00BFFF"]},{identifier:"Sunset Glow",colors:["#FF7F50","#FF69B4"]},{identifier:"Monochromatic Gray",colors:["#D3D3D3","#A9A9A9"]},{identifier:"Pastel Dream",colors:["#FFC0CB","#ADD8E6"]},{identifier:"Vibrant Retro",colors:["#FF00FF","#FFFF00"]},{identifier:"Soft Rose",colors:["#ffafbd","#ffc3a0"]},{identifier:"Vivid Ocean",colors:["#2193b0","#6dd5ed"]},{identifier:"Amethyst Dream",colors:["#cc2b5e","#753a88"]},{identifier:"Emerald Garden",colors:["#56ab2f","#a8e063"]},{identifier:"Mystic Violet",colors:["#614385","#516395"]},{identifier:"Warm Peach",colors:["#FFECD2","#FCB69F"]},{identifier:"Gentle Hues",colors:["#FFEEEE","#DDEFBB"]},{identifier:"Aqua Sunset",colors:["#00C9FF","#92FE9D"]}];"ellevenmind.github.io"!=window.location.hostname&&(window.location.href="https://ellevenmind.github.io/mcpfp");let B=0;let C;let D=false;const E=document.getElementById("pfpCanvas");const F=E.getContext("2d");const G=document.getElementById("username");const H=document.getElementById("loadSkinBtn");const I=document.getElementById("uploadSkinBtn");const J=document.getElementById("downloadPfpBtn");const K=document.getElementById("prevGradient");const L=document.getElementById("nextGradient");const M=document.getElementById("gradientName");const N=document.getElementById("revertSkin");const O=document.getElementById("transparentBackground");const P=document.getElementById("enableCustomGradient");const Q=document.getElementById("customGradientInputs");const R=document.getElementById("customColor1");const S=document.getElementById("customColor2");let T;let U;async function V(url){return new Promise((resolve,reject)=>{const img=new Image();img.crossOrigin="Anonymous";img.onload=()=>resolve(img);img.onerror=(e)=>reject(e);img.src=url;});}async function W(){T=document.createElement('canvas');T.width=20;T.height=20;let aC=T.getContext('2d');aC.fillStyle='#666';aC.fillRect(0,0,20,20);aC.strokeStyle='#eee';aC.lineWidth=2;aC.beginPath();aC.moveTo(5,5);aC.lineTo(15,15);aC.moveTo(5,15);aC.lineTo(15,5);aC.stroke();U=document.createElement('canvas');U.width=20;U.height=20;let aD=U.getContext('2d');aD.fillStyle='rgba(0,0,0,0.3)';aD.beginPath();aD.ellipse(10,18,8,4,0,0,Math.PI*2);aD.fill();X();}async function X(){const aE=G.value.trim()||"dream";const url=`https://minotar.net/skin/${aE}.png`;try{C=await V(url);aA();}catch(e){console.error("Failed to load skin:",e);Y();}}function Y(){F.clearRect(0,0,E.width,E.height);if(T){F.drawImage(T,0,0,E.width,E.height);}else{F.fillStyle="#333";F.fillRect(0,0,E.width,E.height);F.fillStyle="#fff";F.textAlign="center";F.font="20px Poppins, sans-serif";F.fillText("Skin Not Found",E.width/2,E.height/2);}}function Z(aF,aG){const gradient=aF.createLinearGradient(0,0,20,20);gradient.addColorStop(0,aG[0]);gradient.addColorStop(1,aG[1]);aF.fillStyle=gradient;aF.fillRect(0,0,20,20);}function aA(){if(!C){Y();return;}F.clearRect(0,0,E.width,E.height);F.imageSmoothingEnabled=false;let aH;if(D){aH=[R.value,S.value];M.textContent="Custom";}else{aH=A[B].colors;M.textContent=A[B].identifier;}if(!O.checked){const aI=document.createElement('canvas');aI.width=20;aI.height=20;const aJ=aI.getContext('2d');aJ.imageSmoothingEnabled=false;Z(aJ,aH);F.drawImage(aI,0,0,E.width,E.height);}const aK=document.createElement('canvas');aK.width=300;aK.height=300;const aL=aK.getContext('2d');aL.imageSmoothingEnabled=false;aL.scale(15,15);const aM=C.height===32;if(aM){aL.drawImage(C,8,9,7,7,8,4,7,7);aL.drawImage(C,5,9,3,7,5,4,3,7);aL.drawImage(C,44,20,3,7,12,13,3,7);aL.drawImage(C,21,20,6,1,7,11,6,1);aL.drawImage(C,20,21,8,8,6,12,8,8);aL.drawImage(C,44,20,3,7,5,13,3,7);aL.drawImage(C,40,9,7,7,8,4,7,7);aL.drawImage(C,33,9,3,7,5,4,3,7);}else{aL.drawImage(C,8,9,7,7,8,4,7,7);aL.drawImage(C,5,9,3,7,5,4,3,7);aL.drawImage(C,36,52,3,7,12,13,3,7);aL.drawImage(C,21,20,6,1,7,11,6,1);aL.drawImage(C,20,21,8,8,6,12,8,8);aL.drawImage(C,44,20,3,7,5,13,3,7);aL.drawImage(C,40,9,7,7,8,4,7,7);aL.drawImage(C,33,9,3,7,5,4,3,7);aL.drawImage(C,52,52,3,7,12,13,3,7);aL.drawImage(C,52,36,3,7,5,13,3,7);aL.drawImage(C,20,37,8,8,6,12,8,8);aL.drawImage(C,21,36,6,1,7,11,6,1);}F.save();if(N.checked){F.scale(-1,1);F.drawImage(aK,-E.width,0,E.width,E.height);}else{F.drawImage(aK,0,0,E.width,E.height);}F.restore();}H.addEventListener("click",X);G.addEventListener("keyup",(e)=>{if(e.key==="Enter"){X();}});I.addEventListener("click",()=>{const aN=document.createElement("input");aN.type="file";aN.accept="image/png";aN.addEventListener("change",(event)=>{const aO=event.target.files[0];if(aO){const aP=new FileReader();aP.onload=(e)=>{const aQ=new Image();aQ.onload=()=>{if(aQ.width!==64||!(aQ.height===64||aQ.height===32)){alert("Invalid skin image dimensions. Must be 64x64 or 64x32 pixels.");return;}C=aQ;aA();};aQ.src=e.target.result;};aP.readAsDataURL(aO);}});aN.click();});K.addEventListener("click",()=>{if(D){P.checked=false;aB();}B=(B-1+A.length)%A.length;aA();});L.addEventListener("click",()=>{if(D){P.checked=false;aB();}B=(B+1)%A.length;aA();});[N,O].forEach(aR=>{aR.addEventListener("change",aA);});function aB(){D=P.checked;if(D){Q.classList.add("visible");}else{Q.classList.remove("visible");}aA();}P.addEventListener("change",aB);R.addEventListener("input",aA);S.addEventListener("input",aA);J.addEventListener("click",()=>{const aS=document.createElement("a");aS.download=`minecraft-pfp-${G.value.trim()||'pfp'}.png`;aS.href=E.toDataURL("image/png");aS.click();});W();